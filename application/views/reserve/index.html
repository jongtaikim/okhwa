

<div class="calendar" style="padding-bottom:30px;">


    <div class="clearfix">
        <div class="col-md-5">

            <div class="caltable text-left ">
                <form id="FrmAttendanceSearchs"  onsubmit='return false;'>
                    <input type="hidden" name="room_no" value="{_GET.no}"/>
                    <input type="hidden" name="leavedate" id="leavedate" value="<?=date('Y-m-d')?>" class=" datepicker"  />

                    <input type="hidden" name="str_year" id="str_year" value="<?=date('Y')?>" />
                    <input type="hidden" name="str_month" id="str_month" value="<?=date('m')?>" />
                    <input type="hidden" name="str_day" id="str_day" value="<?=date('d')?>" />

                    <div class="month padding clearfix">
                        <img src="/images/prev.jpg" onclick="InoutInList.leftdates()" style="cursor:pointer;" >
                        <span id="temp_year"><?=date('Y')?></span>.<span id="temp_month"><?=date('m')?></span>
                        <img src="/images/next.jpg" onclick="InoutInList.rightdates()" style="cursor:pointer;">
                    </div>
                </form>
                <br>

            </div>
            <div id="search_result" class="m-t10"></div>

        </div>
        <div class="col-md-7" id="day_info"></div>
    </div>


</div>

<script type="text/javascript">
    var InoutInList = {
        page:1,
        init: function() {
            this.lodeindex();
        },
        reload : function(page) {
            InoutInList.lodeindex(page);
        },
        leftdates: function() {
//					var date = $("#str_year").val()+"-"+$("#str_month").val()+"-"+$("#str_day").val();
            var date = $("#str_year").val()+"-"+$("#str_month").val()+"-01";
            var newDt = new Date(date);
            newDt.setMonth( newDt.getMonth() - 1 );
            newDt.setDate(1);
//					var resultDate = InoutInList.converDateString(newDt) ;

            var tty = newDt.getFullYear() ;
            var ttm = InoutInList.addZero(eval(newDt.getMonth()+1)) ;

            $("#str_year").val(tty) ;
            $("#str_month").val(ttm) ;

            $("#temp_year").html(tty) ;
            $("#temp_month").html(ttm) ;

//					$("#leavedate").val(resultDate);
            InoutInList.lodeindex()
        },
        converDateString : function(dt) {
            return dt.getFullYear() + "-" + InoutInList.addZero(eval(dt.getMonth()+1)) + "-" + InoutInList.addZero(dt.getDate());
        },
        addZero : function(i) {
            var rtn = i + 100;
            return rtn.toString().substring(1,3);
        },
        rightdates: function() {
//					var dt = $("#str_year").val()+"-"+$("#str_month").val()+"-"+$("#str_day").val();
            var dt = $("#str_year").val()+"-"+$("#str_month").val()+"-01";
            var newDt = new Date(dt);
            newDt.setMonth( newDt.getMonth() + 1 );
            newDt.setDate(1);

            var tty = newDt.getFullYear() ;
            var ttm = InoutInList.addZero(eval(newDt.getMonth()+1)) ;


            $("#str_year").val(tty) ;
            $("#str_month").val(ttm) ;

            $("#temp_year").html(tty) ;
            $("#temp_month").html(ttm) ;

            InoutInList.lodeindex();
        },

        lodeindex: function() {

            var _data = $('#FrmAttendanceSearchs').serialize()  ;

            $.ajax({
                type: 'POST',
                url: '/user/reserve/lists',
                data : _data,
                dataType : "html", //전송받을 데이터의 타입
                success : function(jsondata) {
                    $('#search_result').html(jsondata) ;

                    InoutInList.viewday();
                }
            });
        },
        viewday : function () {
            var day = '{_GET.day}';
            if(!day) day = '{=date("Y-m-d")}';;

            $.ajax({
                type: 'GET',
                url: '/user/reserve/day',
                data : "day="+day+'&room_no={_GET.no}',
                dataType : "html", //전송받을 데이터의 타입
                success : function(html) {
                    $('#day_info').html(html) ;
                }
            });
        }
    }

    $(function() {
        InoutInList.init();
    })
</script>


